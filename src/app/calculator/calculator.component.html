<div class="split-container d-flex flex-row">
  <form [formGroup]="productFormContainer" class="w-75">
    <div formArrayName="productForm" class="calculator-container">
      <div *ngFor="let product of getLinesOfProducts().controls; let i = index">
        <div class="card mb-5" [formGroupName]="i">
          <div class="card-header d-flex flex-row justify-content-between">
            <div class="card-header-text">produit {{ i + 1 }}</div>
            <div
              class="card-header-delete"
              *ngIf="getLinesOfProducts().length > 1"
            >
              <svg-icon
                src="../../assets/icons/trash.svg"
                class="mr-2"
                (click)="deleteProduct(i)"
              ></svg-icon>
            </div>
          </div>
          <div class="card-body">
            <div class="flex-form">
              <div class="form-cell">
                <label for="support-{{ i }}">Support</label>
                <select
                  formControlName="support"
                  name="support-{{ i }}"
                  id="support-{{ i }}"
                >
                  <option disabled selected value=""></option>
                  <option
                    *ngFor="let item of supportsItems"
                    value="{{ item.name }}"
                  >
                    {{ item.name }}
                  </option>
                </select>
              </div>
              <div class="form-cell">
                <label for="length-{{ i }}">Longueur<small>(cm)</small></label>
                <input
                  type="text"
                  formControlName="length"
                  id="length-{{ i }}"
                />
              </div>
              <div class="form-cell">
                <label for="width-{{ i }}">Largeur<small>(cm)</small></label>
                <input type="text" formControlName="width" id="width-{{ i }}" />
              </div>
              <div class="form-cell">
                <label for="quantity-{{ i }}">Quantité</label>
                <input
                  type="text"
                  formControlName="quantity"
                  id="quantity-{{ i }}"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <button
        class="btn btn-secondary justify-self-end btn-calculate"
        (click)="calculate()"
      >
        <svg-icon src="../../assets/icons/money.svg" class="mr-2"></svg-icon>
        Calculer
      </button>
    </div>
  </form>

  <div class="recap w-25">
    <div *ngFor="let product of getLinesOfProducts().controls; let i = index">
      <div class="recap-container card mb-3">
        <p class="card-header">P.{{ i + 1 }} : {{ product.value.support }}</p>
        <div class="recap-body card-body">
          <div class="recap-body-item">
            {{ product.value.length }} X
            {{ product.value.width }}
          </div>
          <div class="recap-body-item">
            {{ product.value.quantity }}
            exemplaire(s)
          </div>
        </div>
        <div class="recap-body-item price-item">
          {{ product.value.price }} €
        </div>
      </div>
    </div>
  </div>
</div>

<button class="add-version-btn btn btn-primary" (click)="onAddProduct()">
  <svg-icon src="../../assets/icons/plus.svg" class="mr-2"></svg-icon>
  version
</button>
